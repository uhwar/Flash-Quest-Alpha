<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.flashquest.ui.QuestController">
   <children>
      <!-- Header with quest info and progress -->
      <VBox styleClass="padding-medium" spacing="12">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="20">
               <children>
                  <Button fx:id="abandonQuestButton" onAction="#onAbandonQuest" styleClass="error" text="⚠️ Abandon" />
                  <VBox spacing="4">
                     <children>
                        <Label fx:id="questNameLabel" styleClass="header" text="Quick Quest" />
                        <Label fx:id="questProgressLabel" styleClass="label" text="Question 1 of 10" />
                     </children>
                  </VBox>
                  <Region HBox.hgrow="ALWAYS" />
                  <VBox alignment="CENTER_RIGHT" spacing="4">
                     <children>
                        <Label fx:id="playerNameLabel" styleClass="subtitle" text="Player" />
                        <HBox spacing="8" alignment="CENTER_RIGHT">
                           <children>
                              <Label fx:id="levelLabel" styleClass="level" text="Level 1" />
                              <Label fx:id="hpLabel" styleClass="hp" text="❤️ 3/3" />
                           </children>
                        </HBox>
                     </children>
                  </VBox>
               </children>
            </HBox>
            
            <!-- Progress bar -->
            <ProgressBar fx:id="questProgressBar" maxWidth="1.7976931348623157E308" progress="0.1" styleClass="xp" prefHeight="8" />
            
            <!-- HP and XP indicators -->
            <HBox spacing="20">
               <children>
                  <VBox spacing="4">
                     <children>
                        <Label styleClass="label" text="Health" />
                        <ProgressBar fx:id="hpProgressBar" prefWidth="120" progress="1.0" styleClass="hp" prefHeight="6" />
                     </children>
                  </VBox>
                  <VBox spacing="4" HBox.hgrow="ALWAYS">
                     <children>
                        <HBox alignment="CENTER_LEFT" spacing="8">
                           <children>
                              <Label styleClass="label" text="Quest XP Earned" />
                              <Region HBox.hgrow="ALWAYS" />
                              <Label fx:id="questXpLabel" styleClass="xp" text="0 XP" />
                           </children>
                        </HBox>
                        <ProgressBar fx:id="xpProgressBar" maxWidth="1.7976931348623157E308" progress="0.5" styleClass="xp" prefHeight="6" />
                     </children>
                  </VBox>
                  <VBox spacing="4">
                     <children>
                        <Label styleClass="label" text="Difficulty" />
                        <Label fx:id="difficultyLabel" styleClass="level" text="🟡 Medium" />
                     </children>
                  </VBox>
               </children>
            </HBox>
         </children>
      </VBox>

      <Separator />

      <!-- Main quest content -->
      <VBox styleClass="padding-large" spacing="24" VBox.vgrow="ALWAYS">
         <children>
            <!-- Question and Answer sections in horizontal layout -->
            <HBox spacing="20" VBox.vgrow="ALWAYS">
               <children>
                  <!-- Question section -->
                  <VBox spacing="16" HBox.hgrow="ALWAYS">
                     <children>
                        <Label styleClass="header" text="📋 Question" />
                        
                        <!-- Question display -->
                        <ScrollPane fx:id="questionScrollPane" fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="question-display">
                           <content>
                              <VBox spacing="12" styleClass="padding-medium">
                                 <children>
                                    <Label fx:id="questionLabel" styleClass="quest-question-text" wrapText="true" text="What is the difference between == and .equals() in Java?" />
                                    <Label fx:id="categoryLabel" styleClass="achievement-badge" text="📚 Java Basics" />
                                 </children>
                              </VBox>
                           </content>
                        </ScrollPane>
                     </children>
                  </VBox>
                  
                  <!-- Answer section (initially hidden) -->
                  <VBox fx:id="answerSection" spacing="16" visible="false" managed="false" HBox.hgrow="ALWAYS">
                     <children>
                        <Label styleClass="header" text="💡 Answer" />
                        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="answer-display">
                           <content>
                              <VBox styleClass="padding-medium">
                                 <children>
                                    <Label fx:id="answerLabel" styleClass="quest-answer-text" wrapText="true" text="== compares object references (memory addresses), while .equals() compares object content. For primitives, == compares values directly." />
                                 </children>
                              </VBox>
                           </content>
                        </ScrollPane>
                     </children>
                  </VBox>
               </children>
            </HBox>
            
            <!-- Action buttons -->
            <VBox spacing="12">
               <children>
                  <!-- Show answer button -->
                  <Button fx:id="showAnswerButton" maxWidth="1.7976931348623157E308" onAction="#onShowAnswer" prefHeight="40" styleClass="primary" text="👁️ Show Answer" />
                  
                  <!-- Self-assessment buttons (initially hidden) -->
                  <HBox fx:id="assessmentButtons" spacing="12" visible="false" managed="false">
                     <children>
                        <Button fx:id="incorrectButton" onAction="#onIncorrect" prefHeight="45" styleClass="error" text="❌ Incorrect" HBox.hgrow="ALWAYS" maxWidth="1.7976931348623157E308" />
                        <Button fx:id="correctButton" onAction="#onCorrect" prefHeight="45" styleClass="success" text="✅ Correct" HBox.hgrow="ALWAYS" maxWidth="1.7976931348623157E308" />
                     </children>
                  </HBox>
                  
                  <!-- Next question button (initially hidden) -->
                  <Button fx:id="nextQuestionButton" maxWidth="1.7976931348623157E308" onAction="#onNextQuestion" prefHeight="40" styleClass="primary" text="➡️ Next Question" visible="false" managed="false" />
               </children>
            </VBox>
         </children>
      </VBox>
   </children>
   <padding>
      <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
   </padding>
</VBox>
